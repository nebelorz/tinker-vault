<div class="flex items-center mb-2">
    <div class="flex-1">
        <app-search-box (search)="updateSearchTerm($event)" />
    </div>
</div>

<div class="overflow-x-auto mx-auto" style="max-width: 50vw">
    <table class="table table-xs w-full">
        <thead>
            <tr>
                @for (col of columns(); track col.key) {
                <th [ngClass]="col.class" [style.width]="col.width || null">
                    {{ col.label }}
                </th>
                }
            </tr>
        </thead>
        <tbody>
            @for (row of filteredData(); track $index) {
            <tr class="cursor-pointer hover:bg-base-200 transition-colors" [class.bg-base-300]="isRowSelected(row)" (click)="rowClicked.emit(row)">
                @for (col of columns(); track col.key) {
                <td [ngClass]="col.class" [style.width]="col.width || null">
                    @switch (col.type) { @case ('image') {
                    <div class="avatar">
                        <div class="mask mask-squircle w-6 h-6">
                            <img [src]="getImageSrc(row, col.key)" [alt]="$any(row)['name'] || col.label" />
                        </div>
                    </div>
                    } @case ('array') {
                    <span class="text-xs">
                        {{ isArray($any(row)[col.key]) ? $any(row)[col.key].join(", ") : $any(row)[col.key] }}
                    </span>
                    } @default {
                    <span class="text-xs">{{ $any(row)[col.key] }}</span>
                    } }
                </td>
                }
            </tr>
            }
        </tbody>
    </table>
</div>
